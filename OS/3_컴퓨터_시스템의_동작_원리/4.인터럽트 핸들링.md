# 🚀 인터럽트 핸들링

> 인터럽트 핸들링이란 인터럽트가 발생한 경우에 처리해야할 일의 절차를 의미한다.

예를 들어 프로그램 1이 실행되고 있을 때 인터럽트가 발생하면 1의 현재 상태를 먼저 저장한다. 여기서 현재 상태란 현재 CPU에서 실행 중인 명령의 메모리 주소를 포함해 몇 가지 부가적인 정보들을 의미한다.

CPU에서 명령이 실행될 때에는 CPU 내부에 있는 임시 기억장치인 레지스터에 데이터를 읽거나 쓰면서 작업을 하는데, 이때 인터럽트가 발생해 새로운 명령을 실행하면 기존의 레지스터 값이 지워지게 되므로 CPU 내의 이러한 상태들을 저장해두어야 한다. 이것을 모두 저장한 후에야 인터럽트 처리가 이루어질 수 있다.

OS는 현재 시스템 내에서 실행되는 프로그램들을 관리하기 위해 **프로세스 제어 블록 (PCB, Process Control Block)** 이라는 자료구조를 둔다. PCB는 각각의 프로그램마다 하나씩 존재하며 해당 프로그램의 어느 부분이 실행 중이었는지 저장하고 있다.

> 구체적으로는 프로그램이 실행 중이던 코드의 메모리 주소와 레지스터 값, 하드웨어 상태 등이 저장된다.

즉 인터럽트가 발생하면 PCB에 실행 중이던 프로그램의 정보를 저장, 인터럽트 처리 루틴을 통해 작업 수행 후 PCB 복원, 마지막으로 하던 일을 다시 처리하게 되는 것이다.

오늘날의 컴퓨터에서 운영체제는 인터럽트가 발생할 때에만 실행된다. 이는 시스템이 부팅 후 정상 상태에 머무르게 되면 CPU가 항상 사용자 프로그램에 의해 사용되며, 운영체제는 단지 인터럽트가 발생했을 때에만 잠깐 CPU의 제어권을 획득할 수 있기 때문이다.

> 인터럽트가 발생하지 않으면 원래 실행 중인 사용자 프로그램이 원하는 만큼 CPU를 계속 점유하고 있게 된다.

즉 인터럽트가 발생할 때에만 OS 코드 부분으로 CPU가 이양되어 인터럽트 처리를 수행하게 된다.

---

### 결론

OS가 직접 CPU를 점유하는 경우는 인터럽트에 의하지 않는 한 발생하지 않는다. 그럼에도 불구하고 OS는 컴퓨터 시스템 내의 모든 하드웨어 및 소프트웨어 자원을 체계적이고 효율적으로 관리할 수 있다.
